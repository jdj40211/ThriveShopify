{% comment %}
  Blog Card Snippet

  Parameters:
  - article: The blog article object
  - image_aspect_ratio: Image aspect ratio ('4/3' or '3/4', default: '4/3')
  - show_excerpt: Whether to show excerpt (default: true)
  - show_date: Whether to show published date (default: true)
  - show_author: Whether to show author (default: false)
  - excerpt_limit: Character limit for excerpt (default: 120)
{% endcomment %}

{% assign image_aspect_ratio = image_aspect_ratio | default: '4/3' %}
{% assign show_excerpt = show_excerpt | default: true %}
{% assign show_date = show_date | default: true %}
{% assign show_author = show_author | default: false %}
{% assign excerpt_limit = excerpt_limit | default: 120 %}
{% assign is_featured = is_featured | default: false %}

<article
  class="blog-card group cursor-pointer h-full flex flex-col transition-all duration-300 hover:-translate-y-1 hover:shadow-lg"
  onclick="window.location.href='{{ article.url }}'"
>
  <!-- Article Image -->
  <div class="relative overflow-hidden rounded-lg mb-4 w-full {% if is_featured %}aspect-[16/9]{% elsif image_aspect_ratio == '3/4' %}aspect-[3/4]{% else %}aspect-[4/3]{% endif %}">
    {% if article.image %}
      {% if is_featured %}
        <img
          src="{{ article.image | image_url: width: 800 }}"
          alt="{{ article.image.alt | default: article.title }}"
          class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
          width="800"
          height="450"
          loading="eager"
        >
      {% else %}
        <img
          src="{{ article.image | image_url: width: 400 }}"
          alt="{{ article.image.alt | default: article.title }}"
          class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
          width="400"
          height="{% if image_aspect_ratio == '3/4' %}533{% else %}300{% endif %}"
          loading="lazy"
        >
      {% endif %}
    {% elsif article.featured_image %}
      {% if is_featured %}
        <img
          src="{{ article.featured_image | image_url: width: 800 }}"
          alt="{{ article.featured_image.alt | default: article.title }}"
          class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
          width="800"
          height="450"
          loading="eager"
        >
      {% else %}
        <img
          src="{{ article.featured_image | image_url: width: 400 }}"
          alt="{{ article.featured_image.alt | default: article.title }}"
          class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
          width="400"
          height="{% if image_aspect_ratio == '3/4' %}533{% else %}300{% endif %}"
          loading="lazy"
        >
      {% endif %}
    {% else %}
      <!-- Placeholder when no image -->
      <div class="w-full h-full bg-gray-200 flex items-center justify-center">
        <svg
          class="{% if is_featured %}w-20 h-20{% else %}w-12 h-12{% endif %} text-gray-400"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/>
        </svg>
      </div>
    {% endif %}

    <!-- Hover overlay -->
    <div class="absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-all duration-300"></div>
  </div>

  <!-- Article Content -->
  <div class="space-y-3 flex-1 flex flex-col justify-between">
    <!-- Article Title -->
    <h3 class="{% if is_featured %}text-xl lg:text-2xl{% else %}text-lg{% endif %} font-semibold text-gray-900 group-hover:text-gray-700 transition-colors duration-200 line-clamp-2">
      {{ article.title }}
    </h3>

    <!-- Article Excerpt -->
    {% if show_excerpt and article.excerpt != blank %}
      <div class="text-gray-600 {% if is_featured %}text-base{% else %}text-sm{% endif %} {% if is_featured %}line-clamp-4{% else %}line-clamp-3{% endif %}">
        {% if article.excerpt.size > excerpt_limit %}
          {{ article.excerpt | truncate: excerpt_limit }}
        {% else %}
          {{ article.excerpt }}
        {% endif %}
      </div>
    {% elsif show_excerpt and article.content != blank %}
      <div class="text-gray-600 {% if is_featured %}text-base{% else %}text-sm{% endif %} {% if is_featured %}line-clamp-4{% else %}line-clamp-3{% endif %}">
        {{ article.content | strip_html | truncate: excerpt_limit }}
      </div>
    {% endif %}

    <!-- Article Meta -->
    <div class="flex items-center justify-between text-xs text-gray-500">
      <div class="flex items-center space-x-3">
        <!-- Published Date -->
        {% if show_date %}
          <time datetime="{{ article.published_at | date: '%Y-%m-%d' }}" class="flex items-center space-x-1">
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
            <span>{{ article.published_at | date: '%b %d, %Y' }}</span>
          </time>
        {% endif %}

        <!-- Author -->
        {% if show_author and article.author != blank %}
          <div class="flex items-center space-x-1">
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            <span>{{ article.author }}</span>
          </div>
        {% endif %}
      </div>

      <!-- Read More Indicator -->
      <div class="flex items-center space-x-1 text-gray-400 group-hover:text-gray-600 transition-colors duration-200">
        <span class="text-xs">Leer m√°s</span>
        <svg
          class="w-3 h-3 transform group-hover:translate-x-1 transition-transform duration-200"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </div>
    </div>
  </div>
</article>
