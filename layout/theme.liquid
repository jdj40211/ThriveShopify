<!doctype html>
<html lang="{{ request.locale.iso_code }}">
  <head>
    {% # Cache busting variable %}
    {% assign cache_buster = 'now' | date: '%s' %}

    {% # Inlined CSS Variables %}
    {% render 'css-variables' %}

    {% # Meta tags para control de cach√© %}
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    {% # Establish early connections for critical CDNs %}
    <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
    <link rel="preconnect" href="https://cdn.shopifycloud.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

    {% # Load and preload the critical CSS with cache busting %}
    <link rel="stylesheet" href="{{ 'critical.css' | asset_url }}?v={{ cache_buster }}" data-preload>
    <link rel="stylesheet" href="{{ 'styles.css' | asset_url }}?v={{ cache_buster }}" data-preload>

    {% # Social, title, etc. %}
    {% render 'meta-tags' %}

    {% # Favicon %}
    {% if settings.favicon %}
      <link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32 }}">
      <link rel="apple-touch-icon" href="{{ settings.favicon | image_url: width: 180 }}">
    {% else %}
      <link rel="icon" type="image/png" href="https://cdn.shopify.com/s/files/1/0671/2285/6119/files/faviconThrive.png?v=1764212304">
      <link rel="apple-touch-icon" href="https://cdn.shopify.com/s/files/1/0671/2285/6119/files/faviconThrive.png?v=1764212304">
    {% endif %}

    {{ content_for_header }}

    <!-- Swiper.js CSS (loaded without blocking rendering) -->
    <link
      rel="preload"
      as="style"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css?v={{ cache_buster }}"
      onload="this.onload=null;this.rel='stylesheet'"
    >
    <noscript>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css?v={{ cache_buster }}">
    </noscript>

    <!-- Swiper.js JS - Load early for iOS compatibility -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js?v={{ cache_buster }}"></script>

    <!-- HLS.js for video streaming -->
    <script defer src="https://cdn.jsdelivr.net/npm/hls.js@latest?v={{ cache_buster }}"></script>

    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js?v={{ cache_buster }}"></script>
    <script src="{{ 'infinite-scroll.js' | asset_url }}?v={{ cache_buster }}" defer="defer"></script>
  </head>

  <body>
    {% sections 'header-group' %}
    <div class="-mt-23">
      {{ content_for_layout }}
    </div>

    {% sections 'footer-group' %}

    <!-- Cart Drawer -->
    {% sections 'cart-drawer-group' %}

    <!-- Search Drawer -->
    {% sections 'search-drawer-group' %}
  </body>
</html>
